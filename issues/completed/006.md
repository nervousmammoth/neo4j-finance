# Issue 006: Foreign Key Detector

## Branch Name
`issue/006-fk-detector`

## Objective
Detect foreign keys in CSV/XLSX data based on column name patterns and data characteristics.

## Dependencies
- Issue 003, 004, 005 merged

## Phase: RED - Write Failing Tests

### Test Cases (15+)
1. Detect `*_id` columns
2. Detect `*_iban` columns
3. Detect `bank_id` references
4. Detect `from_iban` / `to_iban` pairs
5. Confidence scoring
6. Multiple FKs in same table
7. No FKs detected
8. Case insensitive detection
9. Underscore vs camelCase
10. Composite keys
11. Self-referencing keys
12. FK with NULL values
13. FK with invalid references
14. FK detection with custom patterns
15. FK statistics (uniqueness, completeness)

### Test File Location
`__tests__/unit/lib/fk-detector.test.ts`

### Git Commit
```bash
git commit -m "test: add failing tests for FK detector"
```

## Phase: GREEN - Implement

### Implementation (`lib/fk-detector.ts`)
- Regex-based column name detection
- Confidence scoring algorithm
- Support for custom patterns

### Git Commit
```bash
git commit -m "feat: implement FK detector with confidence scoring"
```

## Phase: REFACTOR

### Refactoring Goals
- Configurable detection rules
- Performance optimization
- Better confidence algorithm

### Git Commit
```bash
git commit -m "refactor: improve FK detection rules"
```

## Acceptance Criteria
- [ ] All 15+ tests pass
- [ ] Coverage >= 100%
- [ ] PR merged âœ…

## Estimated Effort
**M** (Medium)
