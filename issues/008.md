# Issue 008: Node Cypher Query Generator

## Branch Name
`issue/008-node-query-generator`

## Objective
Generate Cypher CREATE/MERGE queries for nodes with proper parameterization.

## Dependencies
- Issue 005 merged

## Phase: RED - Write Failing Tests

### Test Cases (20+, 4 per entity type)
**Person:**
1. Generate CREATE query
2. Generate MERGE query with ID
3. Handle NULL values
4. Dataset namespacing

**BankAccount:**
5. Generate CREATE query
6. Generate MERGE query with IBAN
7. Handle optional fields
8. Type conversions

**Bank:**
9. Generate CREATE query
10. Generate MERGE query with bank_id
11. Batch operations
12. Error handling

**Company:**
13. Generate CREATE query
14. Generate MERGE query
15. Boolean handling
16. Date formatting

**Transaction:**
17. Generate CREATE query
18. Handle relationships inline
19. Timestamp formatting
20. Flagged transactions

### Test File Location
`__tests__/unit/lib/cypher/node-generator.test.ts`

### Git Commit
```bash
git commit -m "test: add failing tests for node query generator"
```

## Phase: GREEN - Implement

### Implementation (`lib/cypher/node-generator.ts`)
```typescript
export function generateNodeQuery(
  entityType: string,
  data: Record<string, any>,
  options: { merge?: boolean; datasetId?: string }
): { query: string; params: Record<string, any> }
```

### Git Commit
```bash
git commit -m "feat: implement node Cypher query generator"
```

## Phase: REFACTOR

### Refactoring Goals
- Template-based generation
- Query optimization
- Batch query generation

### Git Commit
```bash
git commit -m "refactor: optimize query generation"
```

## Acceptance Criteria
- [ ] All 20+ tests pass
- [ ] Coverage >= 100%
- [ ] PR merged âœ…

## Estimated Effort
**M** (Medium)
