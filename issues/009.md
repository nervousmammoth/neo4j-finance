# Issue 009: Relationship Cypher Query Generator

## Branch Name
`issue/009-relationship-query-generator`

## Objective
Generate Cypher queries for creating relationships between nodes.

## Dependencies
- Issue 007, 008 merged

## Phase: RED - Write Failing Tests

### Test Cases (18+)
1. OWNS relationship (Person -> Account)
2. OWNS relationship (Company -> Account)
3. HELD_AT relationship (Account -> Bank)
4. FROM relationship (Transaction -> Account)
5. TO relationship (Transaction -> Account)
6. REPORTS_TO relationship (Employee -> Employee)
7. CONTROLS relationship (Person -> Company)
8. Relationship with properties
9. Batch relationships
10. Bidirectional relationships
11. MERGE vs CREATE
12. Dataset-scoped relationships
13. Error handling for missing nodes
14. Relationship validation
15. Multiple relationships same nodes
16. Weighted relationships
17. Temporal relationships
18. Circular relationship prevention

### Test File Location
`__tests__/unit/lib/cypher/relationship-generator.test.ts`

### Git Commit
```bash
git commit -m "test: add failing tests for relationship query generator"
```

## Phase: GREEN - Implement

### Implementation (`lib/cypher/relationship-generator.ts`)
- Generate MATCH + CREATE/MERGE queries
- Handle relationship properties
- Parameterization

### Git Commit
```bash
git commit -m "feat: implement relationship query generator"
```

## Phase: REFACTOR

### Refactoring Goals
- Optimize for batch operations
- Add relationship validation
- Improve error messages

### Git Commit
```bash
git commit -m "refactor: optimize relationship queries"
```

## Acceptance Criteria
- [ ] All 18+ tests pass
- [ ] Coverage >= 100%
- [ ] PR merged âœ…

## Estimated Effort
**M** (Medium)
