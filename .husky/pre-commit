#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Load nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
nvm use 20

echo "🔍 Running pre-commit checks..."

# Type check
echo "📝 Type checking..."
npm run type-check || exit 1

# Lint
echo "🧹 Linting..."
npm run lint || exit 1

# Unit tests with coverage
echo "🧪 Running tests with coverage..."
npm run test:coverage || exit 1

echo "✅ All pre-commit checks passed!"
